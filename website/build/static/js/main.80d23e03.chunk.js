(this["webpackJsonpantd-demo"]=this["webpackJsonpantd-demo"]||[]).push([[0],{211:function(e,t,s){e.exports=s(434)},216:function(e,t,s){},289:function(e){e.exports=JSON.parse("{}")},433:function(e,t,s){},434:function(e,t,s){"use strict";s.r(t);var i={};s.r(i),s.d(i,"SetToken",(function(){return Q})),s.d(i,"ApiService",(function(){return X})),s.d(i,"setBaseUrl",(function(){return Y})),s.d(i,"getBaseUrl",(function(){return G})),s.d(i,"encodeQueryData",(function(){return $}));var a=s(0),n=s.n(a),r=s(6),o=s.n(r),l=(s(216),s(188),s(120)),c=(s(82),s(40)),d=(s(223),s(206)),m=(s(63),s(19)),h=(s(91),s(42)),g=(s(149),s(75)),u=s(107),p=s.n(u),f=(s(243),s(442)),y=s(438),w=s(437),E=s(436),b=s(446),C=s(435),k=(s(289),s(90)),x=s.n(k),v=s(189),S=s.n(v),I=s(209),L=s(208),T=s(20),B=s.n(T);const _={data:new Map,get(e){return e&&this.data.get(e)||null},set(e,t){if(e)return this.data.set(e,t)}};class F extends n.a.Component{constructor(e){super(...arguments),this.connectScrollTarget=this.connectScrollTarget.bind(this),this._target=window}connectScrollTarget(e){this._target=e}restoreScrollPosition(e){e=e||this.props.scrollStore.get(this.props.scrollKey),this._target&&e&&B()(()=>{var t,s,i;t=this._target,s=e.x,i=e.y,t instanceof window.Window?t.scrollTo(s,i):(t.scrollLeft=s,t.scrollTop=i)})}saveScrollPosition(e){if(this._target){const t=function(e){if(e instanceof window.Window)return{x:e.scrollX,y:e.scrollY};return{x:e.scrollLeft,y:e.scrollTop}}(this._target);e=e||this.props.scrollKey,this.props.scrollStore.set(e,t)}}componentDidMount(){this.restoreScrollPosition()}UNSAFE_componentWillReceiveProps(e){this.props.scrollKey!==e.scrollKey&&this.saveScrollPosition()}componentDidUpdate(e){this.props.scrollKey!==e.scrollKey&&this.restoreScrollPosition()}componentWillUnmount(){this.saveScrollPosition()}render(){const e=this.props,t=e.children,s=void 0===t?null:t,i=Object(L.a)(e,["children"]);return s&&s(Object(I.a)({},i,{connectScrollTarget:this.connectScrollTarget}))}}F.defaultProps={scrollStore:_};s(99);var A=s(21),R=(s(77),s(43)),D=(s(79),s(35)),j=(s(170),s(54)),W=(s(171),s(32)),q=(s(172),s(87)),P=s(83),U=s.n(P);s(173),s(70);D.a.Meta;const O=["#f69600","#f66200","#edf600","#00f6a8","#00b9f6","#1700f6","#8b00f6","#f600e2","#f60057"];class z extends n.a.Component{constructor(e){super(e),this.state={randomColor:O[Math.floor(Math.random()*O.length)]}}render(){const e=this.props.comment;return n.a.createElement("div",null,n.a.createElement("div",{style:{width:"95%",marginLeft:"5%",height:5,backgroundColor:"rgba(0,0,0,.01)",marginTop:10,marginBottom:10}}),n.a.createElement("div",{style:{width:"95%",marginLeft:"5%",borderLeft:"4px solid ".concat(M(this.state.randomColor,.4)),paddingLeft:10,marginTop:5}},n.a.createElement(j.a,{gutter:24},n.a.createElement(W.a,{span:24,justify:"center"},n.a.createElement(q.a,{src:"https://image.flaticon.com/icons/svg/2743/2743220.svg",size:"small",shape:"circle"}),n.a.createElement("span",{style:{color:"rgba(0,0,0,.75)",fontSize:13,fontFamily:"Open Sans",marginLeft:5}},e.text),n.a.createElement("span",{style:{display:"block",marginTop:5,fontSize:10,textAlign:"left"}},U()(e.created_at).fromNow()),e&&e.user_alias&&n.a.createElement("span",{style:{display:"block",marginTop:5,fontSize:12,textAlign:"right"}},"por ",n.a.createElement("i",null,"@",e.user_alias))))))}}function M(e,t){var s;if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(e))return 3==(s=e.substring(1).split("")).length&&(s=[s[0],s[0],s[1],s[1],s[2],s[2]]),"rgba("+[(s="0x"+s.join(""))>>16&255,s>>8&255,255&s].join(",")+","+t+")";throw new Error("Bad Hex")}var N=s(445),V=s(193),K=s.n(V),J="https://api.friwords.com/api/v1/",H=J;function Q(e){localStorage.setItem("JWT_TOKEN",e),e}function X(e=15e3,t){t||(t={Accept:"application/json","Content-Type":"application/json"},localStorage.getItem("JWT_TOKEN")&&(t.Authorization="Bearer "+localStorage.getItem("JWT_TOKEN")));var s=p.a.create({baseURL:G(),timeout:e,headers:t});return s.interceptors.response.use(e=>e,e=>(401===e.response.status&&alert("error"),e)),K()(s,{retries:5,retryDelay:e=>1e3*e}),s}function Y(e){H=null==e?J:e}function G(){return H}function $(e){let t=[];for(let s in e)t.push(encodeURIComponent(s)+"="+encodeURIComponent(e[s]));return t.join("&")}var Z={signInAnonymously:function(e,t,s){X().post("auth/anonymous",e).then(e=>{t&&t(e.data)}).catch(e=>{s&&s(e)})},signInWithAlias:function(e,t,s){X().post("auth/anonymous/credentials",e).then(e=>{t&&t(e.data)}).catch(e=>{s&&s(e)})},setPasswordAnonymousUser:function(e,t,s){X().post("auth/anonymous/onboard/set_password",e).then(e=>{t&&t(e.data)}).catch(e=>{s&&s(e)})},getMe:function(e,t){X().get("profile/me").then(t=>{e&&e(t.data)}).catch(e=>{t&&t(e)})},updateMe:function(e,t,s){X().post("profile/me",e).then(e=>{t&&t(e.data)}).catch(e=>{s&&s(e)})}},ee={getFriwords:function(e,t){X().get("friwords").then(t=>{e&&e(t.data)}).catch(e=>{t&&t(e)})},getFriwordsByFilter:function(e,t,s){X().post("friwords/filter",e).then(e=>{t&&t(e.data)}).catch(e=>{s&&s(e)})},getFriwordById:function(e,t,s){let i="friwords/".concat(e);X().get(i).then(e=>{t&&t(e.data)}).catch(e=>{s&&s(e)})},likeById:function(e,t,s){let i="friwords/".concat(e,"/like");X().post(i).then(e=>{t&&t(e.data)}).catch(e=>{s&&s(e)})},dislikeById:function(e,t,s){let i="friwords/".concat(e,"/dislike");X().post(i).then(e=>{t&&t(e.data)}).catch(e=>{s&&s(e)})},postFriword:function(e,t,s){X().post("friwords",e).then(e=>{t&&t(e.data)}).catch(e=>{s&&s(e)})},postComment:function(e,t,s){let i="friwords/".concat(e.friword_id,"/comments");X().post(i,e).then(e=>{t&&t(e.data)}).catch(e=>{s&&s(e)})},hasUpdatesAvailable:function(e,t,s){let i="friwords/updates_available/".concat(e);X().get(i).then(e=>{t&&t(e.data)}).catch(e=>{s&&s(e)})}},te=s(146);s(327);te.initializeApp({apiKey:"AIzaSyCSAjJKGPVlX6zNOHWT2Otg2nXljs5f_lA",authDomain:"friwords-a3536.firebaseapp.com",databaseURL:"https://friwords-a3536.firebaseio.com",projectId:"friwords-a3536",storageBucket:"friwords-a3536.appspot.com",messagingSenderId:"882500991771",appId:"1:882500991771:web:f125ad3a2aa021a0eaf1be",measurementId:"G-P8SQZY3BKH"});var se=te;D.a.Meta,c.a.Option;class ie extends n.a.Component{constructor(e){super(e),this.checkProps=e=>{e.user&&e.user.alias&&this.setState({user:e.user}),this.setState({isVisible:e.isVisible})},this.onFinish=()=>{this.setState({isLoading:!0}),Z.setPasswordAnonymousUser({alias:this.state.user.alias,password:this.state.auth.password},e=>{e.success&&(i.SetToken(e.token),this.props.onStart&&this.props.onStart()),this.setState({isLoading:!1})},e=>{this.setState({isLoading:!1})})},this.state={isVisible:!1,isLoading:!1,auth:{}}}componentDidMount(){this.checkProps(this.props)}componentWillReceiveProps(e){this.checkProps(e)}render(){const e=this.state.auth;return this.state.user&&this.props.isVisible?n.a.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:99999,backgroundColor:"#25b864"}},n.a.createElement("h1",{style:{textAlign:"center"}},"\xa1Hola!"),n.a.createElement("h4",{style:{textAlign:"center"}},"\xa1D\xe9jame explicarte brevemente como funciona Friwords!"),n.a.createElement("div",{style:{width:"100%",height:5,backgroundColor:"rgba(255,255,255,.15)",marginBottom:10,marginTop:10}}),n.a.createElement("p",{style:{maxWidth:"80%",margin:"0 auto",color:"rgba(255,255,255,.8)",textAlign:"center"}},"A partir de este momento, ",n.a.createElement("span",{style:{color:"rgba(255,255,255,1)",fontWeight:800,fontSize:"1.2em"}},"@",this.props.user.alias)," es tu alias an\xf3nimo. Ese alias es el que te identificar\xe1 de ac\xe1 en adelante, as\xed que an\xf3talo y recu\xe9rdalo. Puedes publicar preguntas y recibir respuestas, y todo esto ser\xe1 totalmente an\xf3nimo."),n.a.createElement("div",{style:{width:"100%",height:5,backgroundColor:"rgba(255,255,255,.15)",marginBottom:10,marginTop:10}}),n.a.createElement("p",{style:{maxWidth:"80%",margin:"0 auto",color:"rgba(255,255,255,.8)",textAlign:"center"}},"Ingresa una contrase\xf1a, y ",n.a.createElement("b",null,"\xa1NO LA OLVIDES!")),n.a.createElement(A.a,{name:"login_in",className:"login-in",onFinish:this.onFinish},n.a.createElement(A.a.Item,{name:"text",rules:[{required:!0,message:"Ingresa una contrase\xf1a"}],style:{width:"90%",margin:"20px auto"}},n.a.createElement(R.a,{onChange:t=>{e.password=t.target.value,this.setState({auth:e})},type:"password",style:{width:"100%",margin:"0 auto"},prefix:n.a.createElement(N.a,{className:"site-form-item-icon"}),placeholder:"Contrase\xf1a"})),n.a.createElement(A.a.Item,{style:{display:"flex",justifyContent:"center",alignItems:"center"}},n.a.createElement(m.a,{type:"primary",htmlType:"submit",loading:this.state.isLoading,style:{display:"flex",width:"100%",margin:"0 auto",backgroundColor:"white",height:50,color:"#25b864",fontWeight:600,justifyContent:"center",alignItems:"center"}},"\xa1Empezar!"))),n.a.createElement(m.a,{onClick:()=>{this.props.onRequestLogin()},type:"primary",htmlType:"submit",loading:this.state.isLoading,style:{display:"flex",width:"75%",margin:"0 auto",backgroundColor:"white",height:50,color:"white",fontWeight:600,justifyContent:"center",alignItems:"center",backgroundColor:"#00a2ff"}},"Ya tengo un alias")):null}}s(186);var ae=s(119),ne=s(444);D.a.Meta,c.a.Option;class re extends n.a.Component{constructor(e){super(e),this.checkProps=e=>{if(e.user&&e.user.alias){let t=this.state.friword;t.user_alias=e.user.alias,this.setState({friword:t})}this.setState({isVisible:e.isVisible})},this.onFinish=()=>{Z.signInWithAlias(this.state.auth,e=>{e.success&&(i.SetToken(e.token),this.props.onLoggedIn(e.user))},e=>(h.a.error({message:"Uups",description:"Esa cuenta no es v\xe1lida"}),!1))},this.isValid=()=>!0,this.state={isVisible:!1,auth:{}}}componentDidMount(){this.checkProps(this.props)}componentWillReceiveProps(e){this.checkProps(e)}render(){const e=this.state.auth;return n.a.createElement(ae.a,{title:"Ingres\xe1 con tu alias",visible:this.state.isVisible,closable:!0,onCancel:()=>{this.props.onRequestClose()},footer:null},n.a.createElement(A.a,{name:"login_in",className:"login-in",onFinish:this.onFinish},n.a.createElement("div",{style:{marginBottom:10,backgroundColor:"rgba(0,0,0,.03)",padding:10}},n.a.createElement("span",null,"\xbfTienes un alias distinto? Ingresa tu alias y la contrase\xf1a que se te pidi\xf3 al crearlo.")),n.a.createElement(A.a.Item,{name:"alias",rules:[{required:!0,message:"Ingresa tu alias"}]},n.a.createElement(R.a,{onChange:t=>{e.alias=t.target.value,this.setState({auth:e})},prefix:n.a.createElement(ne.a,{className:"site-form-item-icon"}),placeholder:"Alias"})),n.a.createElement(A.a.Item,{name:"text",rules:[{required:!0,message:"Ingresa la contrase\xf1a"}]},n.a.createElement(R.a,{onChange:t=>{e.password=t.target.value,this.setState({auth:e})},type:"password",prefix:n.a.createElement(N.a,{className:"site-form-item-icon"}),placeholder:"Contrase\xf1a"})),n.a.createElement(A.a.Item,null,n.a.createElement(m.a,{type:"primary",htmlType:"submit",loading:this.state.isLoading},"Ingresar"))))}}var oe=s(443);D.a.Meta,c.a.Option;const le=R.a.TextArea;class ce extends n.a.Component{constructor(e){super(e),this.checkProps=e=>{if(e.user&&e.user.alias){let t=this.state.friword;t.user_alias=e.user.alias,this.setState({friword:t})}this.setState({isVisible:e.isVisible})},this.onFinish=()=>{this.isValid()&&ee.postFriword(this.state.friword,e=>{e.success&&(this.setState({isVisible:!1,friword:{}}),this.props.onCreated(e.friword))},e=>{})},this.isValid=()=>null!=this.state.friword.gender||(h.a.error({message:"El g\xe9nero",description:"Selecciona tu g\xe9nero"}),!1),this.state={isVisible:!1,friword:{}}}componentDidMount(){this.checkProps(this.props)}componentWillReceiveProps(e){this.checkProps(e)}render(){const e=this.state.friword;return n.a.createElement(ae.a,{title:"Publica tu friword",visible:this.state.isVisible,closable:!0,onCancel:()=>{this.props.onRequestClose()},footer:null},n.a.createElement(A.a,{name:"post_friword",className:"post-friword",initialValues:{remember:!0},onFinish:this.onFinish},n.a.createElement("div",{style:{marginBottom:10,backgroundColor:"rgba(0,0,0,.03)",padding:10}},n.a.createElement("span",null,"\xa1Recuerda! Esto es totalmente an\xf3nimo, y tu friword aparecer\xe1 creado por ",n.a.createElement("b",null,null!=e.user_alias?e.user_alias:""))),n.a.createElement(A.a.Item,{name:"title",rules:[{required:!0,message:"Ingresa un t\xedtulo"}]},n.a.createElement(R.a,{onChange:t=>{e.title=t.target.value,this.setState({friword:e})},prefix:n.a.createElement(oe.a,{className:"site-form-item-icon"}),placeholder:"T\xedtulo"})),n.a.createElement(A.a.Item,{name:"text",rules:[{required:!0,message:"Ingresa el texto"}]},n.a.createElement(le,{placeholder:"Tu texto",autoSize:{minRows:2,maxRows:8},maxLength:255,onChange:t=>{e.text=t.target.value,this.setState({friword:e})},prefix:n.a.createElement(oe.a,{className:"site-form-item-icon"})})),n.a.createElement("span",null,255-(e&&e.text&&e.text.length?e.text.length:0)," caracteres restantes"),n.a.createElement("div",{style:{width:"100%",height:5,backgroundColor:"rgba(0,0,0,0.05)",marginTop:20,marginBottom:20}}),n.a.createElement("span",{style:{width:"100%",display:"block",textAlign:"center",fontWeight:600}},"Selecciona tu g\xe9nero"),n.a.createElement("div",{style:{width:"100%",height:40,display:"flex",flexDirection:"row",marginBottom:20}},n.a.createElement("div",{onClick:()=>{e.gender="female",this.setState({friword:e})},style:{display:"flex",flex:1,flexDirection:"row",backgroundColor:"transparent",justifyContent:"center",alignItems:"center"}},n.a.createElement("img",{style:{maxWidth:35,maxHeight:35,opacity:"female"==e.gender?1:.5},src:"https://image.flaticon.com/icons/svg/590/590083.svg"})),n.a.createElement("div",{onClick:()=>{e.gender="male",this.setState({friword:e})},style:{display:"flex",flex:1,flexDirection:"row",backgroundColor:"transparent",justifyContent:"center",alignItems:"center"}},n.a.createElement("img",{style:{maxWidth:35,maxHeight:35,opacity:"male"==e.gender?1:.5},src:"https://image.flaticon.com/icons/svg/921/921071.svg"}))),n.a.createElement(A.a.Item,null,n.a.createElement(m.a,{type:"primary",htmlType:"submit",loading:this.state.isLoading},"Publicar"))))}}var de=s(207);function me(e){const t=n.a.useState(!0),s=Object(de.a)(t,2),i=s[0],a=s[1],r=n.a.useRef();return n.a.useEffect(()=>{const e=new IntersectionObserver(e=>{e.forEach(e=>a(e.isIntersecting))});return e.observe(r.current),()=>e.unobserve(r.current)},[]),n.a.createElement("div",{className:"fade-in-section ".concat(i?"is-visible":""),ref:r},e.children)}var he=s(441),ge=s(440),ue=s(439),pe=s(147);const fe=D.a.Meta;class ye extends n.a.Component{constructor(e){super(e),this.onDislike=()=>{this.state.hasLiked||this.state.hasDisliked||(this.props.onDislike(),this.setState({hideDislikeBtn:!0,hasDisliked:!0},()=>{setTimeout(()=>{this.setState({hideDislikeBtn:!1})},1e3)}))},this.onLike=()=>{this.state.hasLiked||this.state.hasDisliked||(this.props.onLike(),this.setState({hideLikeBtn:!0,hasLiked:!0},()=>{setTimeout(()=>{this.setState({hideLikeBtn:!1})},1e3)}))},this.state={isLoadingComments:!1,hideDislikeBtn:!1,hideLikeBtn:!1,isSendingComment:!1,canLeaveComment:!0,comment:"",showComments:!1,hasDisliked:!1,hasLiked:!1}}componentDidMount(){}render(){const e=this.props.friword;let t=n.a.createElement("div",{onClick:()=>{!this.state.comment||this.state.comment.length<2?h.a.error({message:"El comentario..",description:"A tu comentario le falta un poco de magia. Compl\xe9talo"}):ee.postComment({text:this.state.comment,user_alias:null!=this.props.user&&null!=this.props.user.alias?this.props.user.alias:"",friword_id:e.id,likes:0,dislikes:0},e=>{this.props.onRequestComments(),this.setState({canLeaveComment:!1,isSendingComment:!0,showComments:!0}),h.a.open({className:"success",message:n.a.createElement(f.a,{twoToneColor:"#eb2f96"}),description:"Tu comentario ya est\xe1 visible"})},e=>{})},style:{backgroundColor:"white",padding:0,marginTop:5}},n.a.createElement(he.a,{style:{color:"rgba(0,0,0,.75)"}}));return this.state.isSendingComment&&(t=n.a.createElement("div",{style:{backgroundColor:"white",padding:0,marginTop:5}},n.a.createElement(he.a,{spin:!0,style:{color:"rgba(0,0,0,.75)"}}))),n.a.createElement(me,{key:e.id},n.a.createElement("div",{className:"data-node-".concat(e.id),style:{marginBottom:5}},n.a.createElement("div",{style:{width:"100%"}},n.a.createElement("div",{style:{width:"100%",height:10,backgroundColor:"rgba(0,0,0,.075)"}}),n.a.createElement(D.a,{bordered:!1,bodyStyle:{padding:10,opacity:this.props.loading?.1:1}},n.a.createElement(fe,{avatar:n.a.createElement(q.a,{src:"female"==e.gender?"https://image.flaticon.com/icons/svg/590/590083.svg":"https://image.flaticon.com/icons/svg/921/921071.svg",size:"small",shape:"circle",style:{width:30,height:30,borderRadius:15}}),title:n.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},n.a.createElement("span",null,e.title)),description:e.text}),n.a.createElement("span",{style:{display:"block",marginTop:10,fontSize:12,textAlign:"right"}},U()(e.created_at).fromNow()),e&&e.user_alias&&n.a.createElement("span",{style:{display:"block",marginTop:0,fontSize:12,textAlign:"right"}},"por ",n.a.createElement("i",null,"@",e.user_alias)),e&&e.user&&null!=e.user.country_code&&n.a.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end",alignItems:"flex-end"}},n.a.createElement("img",{style:{width:20},src:"https://www.countryflags.io/".concat(e.user.country_code,"/shiny/64.png")})),n.a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"flex-start",marginTop:20,marginBottom:20}},n.a.createElement(pe.a,{color:"#008bdb",duration:250,type:"rectangle",particlesAmountCoefficient:1,oscillationCoefficient:5,hidden:this.state.hideLikeBtn},n.a.createElement("div",{onClick:this.onLike,style:{display:"flex",flex:0,alignItems:"center",justifyContent:"center",backgroundColor:"#008bdb",width:100,height:30,borderRadius:10,marginRight:10,cursor:"pointer",opacity:this.props.likes>0?1:.5}},n.a.createElement(ge.a,{style:{color:"white"}}),n.a.createElement("span",{style:{color:"white",marginLeft:5}},this.props.likes))),n.a.createElement(pe.a,{color:"#ff2452",duration:250,type:"rectangle",particlesAmountCoefficient:1,oscillationCoefficient:5,hidden:this.state.hideDislikeBtn},n.a.createElement("div",{onClick:this.onDislike,style:{display:"flex",flex:0,alignItems:"center",justifyContent:"center",backgroundColor:"#ff2452",width:100,height:30,borderRadius:10,cursor:"pointer",opacity:this.props.dislikes>0?1:.5}},n.a.createElement(ue.a,{style:{color:"white"}}),n.a.createElement("span",{style:{color:"white",marginLeft:5}},this.props.dislikes)))),this.state.showComments&&null!=e.comments&&e.comments.length>0&&e.comments.map(e=>n.a.createElement(z,{comment:e})),this.state.isLoadingComments&&(!e.comments||!e.comments.length)&&n.a.createElement(C.a,{style:{fontSize:24,color:"#ff306f",marginTop:10},spin:!0}),!this.state.isLoadingComments&&!this.state.showComments&&e.comments_qty>0&&n.a.createElement("a",{onClick:()=>{this.setState({isLoadingComments:!0,showComments:!0}),this.props.onRequestComments()},style:{display:"block",marginLeft:0,marginTop:20,fontWeight:500}},"Ver ",e.comments_qty," comentarios"),this.state.canLeaveComment&&n.a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginTop:20}},n.a.createElement("div",{style:{height:50}},n.a.createElement(q.a,{src:"https://image.flaticon.com/icons/svg/402/402256.svg",size:"small",shape:"circle",style:{width:30,height:30,borderRadius:15}})),n.a.createElement("div",{style:{display:"flex",flex:1}},n.a.createElement(A.a,{name:"post_comment",style:{width:"100%",paddingLeft:10,paddingRight:10}},n.a.createElement(A.a.Item,{name:"comment",rules:[{required:!0,message:"Ingresa un comentario"}]},n.a.createElement(R.a,{suffix:t,placeholder:"Deja tu comentario",onChange:e=>{this.setState({comment:e.target.value})},style:{borderRadius:10,borderWidth:1,borderColor:"rgba(0,0,0,0.05)",height:40}})))))))))}}c.a.Option;const we=l.a.Title,Ee=g.a.TabPane;class be extends n.a.Component{constructor(e){super(e),this.getMe=()=>{Z.getMe(e=>{if(e.success&&(this.setState({user:e.user}),e.user&&!e.user.country_code&&!e.user.ip)){const e="45c816eed2d04a8b96e59ff177c609af";p.a.get("https://api.ipgeolocation.io/ipgeo?apiKey=".concat(e,"&fields=geo&output=json")).then(e=>{if(e&&e.data){const t=e.data;Z.updateMe({country_name:t&&t.country_name,country_code:t&&t.country_code2,ip:t&&t.ip},e=>{e.success&&this.setState({user:e.user})})}})}})},this.getUsersOnline=()=>{let e=this.state.previousOnlineUsers,t=Math.random()<.5?1:-1,s=e+(Math.floor(5*Math.random())+1)*t;this.setState({newOnlineUsers:s,previousOnlineUsers:e})},this.getFriwords=()=>{this.getUsersOnline(),this.setState({isLoading:!0,hasUpdates:!1}),ee.getFriwordsByFilter(this.state.filters,e=>{let t=[],s=[];for(var i in e.friwords){const a=e.friwords[i];x.a.some(this.state.friwords,e=>e.id==a.id&&e.comments&&e.comments.length>0)?t.push(new Promise((e,t)=>{ee.getFriwordById(a.id,t=>{t.success,s.push(t.friword),e()},t=>{s.push(a.friword),e()})})):s.push(a)}Promise.all(t).then(e=>{let t=x.a.orderBy(s,["created_at"],["desc"]);this.state.friwords&&this.state.friwords.length>0&&this.state.filters.page>0&&(t=this.state.friwords.concat(t)),this.setState({isLoading:!1,friwords:t})})},e=>{alert("Estamos teniendo algunos problemas en este momento. Refresca la p\xe1gina en unos segundos."),this.setState({isLoading:!1})})},this.getFriwordById=e=>{ee.getFriwordById(e,e=>{if(e.success){let t=x.a.findIndex(this.state.friwords,t=>t.id==e.friword.id),s=this.state.friwords;s[t]=e.friword,this.setState({friwords:s})}},e=>{})},this.state={friwords:[],filters:{listing_mode:0,page:0},isWelcome:!1,isCreating:!1,isLoggingIn:!1,isLoading:!0,hasUpdates:!1,previousOnlineUsers:132,newOnlineUsers:132,user:null}}componentDidMount(){this.getFriwords(),setInterval(()=>{this.state.friwords&&this.state.friwords.length>0&&ee.hasUpdatesAvailable(x.a.first(this.state.friwords).id,e=>{e.success&&this.setState({hasUpdates:e.hasUpdates})})},1e4),this.getUsersOnline(),setInterval(this.getUsersOnline,1e4),se.auth().signInAnonymously().catch((function(e){e.code,e.message})),se.auth().onAuthStateChanged((e,t)=>{if(e){let t={type:"anonymous",uid:e.uid};this.setState({user:t}),Z.signInAnonymously(t,e=>{e.success&&(this.setState({user:e.user}),e.user.is_configured&&0!=e.user.is_configured?this.getMe():this.setState({isWelcome:!0}))},e=>{})}})}render(){const e=this.state,t=e.friwords,s=e.filters;return n.a.createElement("div",{className:"friwords-container"},n.a.createElement(F,{scrollKey:"friwords-list"}),n.a.createElement(ie,{isVisible:this.state.isWelcome,user:this.state.user,onStart:()=>{this.setState({isWelcome:!1},this.getMe),h.a.open({className:"success",message:n.a.createElement(f.a,{twoToneColor:"#eb2f96"}),description:"Bienvenid@ a Friwords. Empieza leyendo y divirti\xe9ndote. \xa1Que lo disfrutes!"})},onRequestLogin:()=>{this.setState({isLoggingIn:!0,isWelcome:!1})}}),n.a.createElement("div",{style:{width:"100%",height:45,display:"flex",flexDirection:"row",position:"fixed",top:0,right:0,display:"flex",justifyContent:"center",alignItems:"center",padding:0,backgroundColor:"white",zIndex:9999}},n.a.createElement("div",{style:{height:45,display:"flex",flexDirection:"column",flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"white",borderTopLeftRadius:0,borderBottomLeftRadius:10,cursor:"pointer",zIndex:9999,borderLeft:"2px solid rgba(0,0,0,.05)",borderBottom:"2px solid rgba(0,0,0,.05)"}},n.a.createElement("span",{style:{fontWeight:500,fontSize:"0.6em"}},this.state.user&&this.state.user.alias?"@".concat(this.state.user.alias):"-"),n.a.createElement("a",{style:{textDecorationLine:"underline",fontSize:"0.6em"},href:"#",onClick:()=>{this.setState({isLoggingIn:!0})}},"Cambiar")),n.a.createElement("div",{className:"counter-online-users",style:{height:45,display:"flex",flex:0,justifyContent:"center",alignItems:"center",backgroundColor:"white",borderTopLeftRadius:0,cursor:"pointer",zIndex:9999,borderLeft:"2px solid rgba(0,0,0,.05)",borderBottom:"2px solid rgba(0,0,0,.05)",paddingLeft:10,paddingRight:10}},n.a.createElement(S.a,{start:this.state.previousOnlineUsers,end:this.state.newOnlineUsers}),n.a.createElement("img",{style:{width:20,height:20,marginLeft:10,opacity:.5},src:"https://image.flaticon.com/icons/svg/745/745205.svg"})),n.a.createElement("div",{onClick:this.getFriwords,style:{height:45,display:"flex",flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"#25b864",cursor:"pointer",zIndex:9999,borderBottomRightRadius:10,borderLeft:"0px solid rgba(0,0,0,.05)",borderBottom:"2px solid rgba(0,0,0,.2)",opacity:this.state.hasUpdates?1:.6}},n.a.createElement("span",{style:{fontWeight:500,fontSize:"0.6em",color:"white"}},this.state.isLoading?"Actualizando..":"Actualizar"),n.a.createElement("img",{style:{width:30,height:30,marginLeft:10},src:"https://image.flaticon.com/icons/svg/1688/1688988.svg"}))),n.a.createElement("section",{style:{textAlign:"center",marginTop:80,marginBottom:20}},n.a.createElement(we,{level:2,className:"Title"},"Friwords")),n.a.createElement("div",{className:"scroll-container"},n.a.createElement(re,{isVisible:this.state.isLoggingIn,onRequestClose:()=>{this.setState({isLoggingIn:!1}),this.state.user.is_configured||this.setState({isWelcome:!0})},onLoggedIn:e=>{this.setState({user:e,isLoggingIn:!1},this.getFriwords)}}),n.a.createElement(ce,{isVisible:this.state.isCreating,onRequestClose:()=>{this.setState({isCreating:!1})},user:this.state.user,onCreated:e=>{this.setState({isCreating:!1}),s.page=0,this.setState({filters:s},this.getFriwords),h.a.open({className:"success",message:n.a.createElement(f.a,{twoToneColor:"#eb2f96"}),description:"Tu friword fue publicado exitosamente en la secci\xf3n `Recientes`"})}}),n.a.createElement("div",{style:{width:"100%",flexDirection:"row",justifyContent:"center",alignItems:"center"}},n.a.createElement(m.a,{onClick:()=>{this.setState({isCreating:!0})},type:"primary",icon:n.a.createElement(y.a,null),style:{display:"flex",width:"80%",margin:"0 auto",marginBottom:20,justifyContent:"center",alignItems:"center",height:40}},"Escribir algo")),n.a.createElement(g.a,{type:"card",onTabClick:e=>{2==e?(s.only_me=!0,s.page=0):(s.only_me=!1,s.listing_mode=e,s.page=0),this.setState({filters:s},this.getFriwords)},defaultActiveKey:"0"},n.a.createElement(Ee,{tab:n.a.createElement("span",null,n.a.createElement(w.a,null),"M\xe1s destacados"),key:"0"},t&&t.map((e,t)=>n.a.createElement(ye,{loading:this.state.isLoading,friword:e,comments:e.comments,likes:e.likes_qty,dislikes:e.dislikes_qty,commentsQty:e.comments_qty,user:this.state.user,onLike:()=>{ee.likeById(e.id,t=>{setTimeout(()=>{this.getFriwordById(e.id)},500)})},onDislike:()=>{ee.dislikeById(e.id,t=>{setTimeout(()=>{this.getFriwordById(e.id)},500)})},onRequestComments:()=>{this.getFriwordById(e.id)}})),n.a.createElement(m.a,{onClick:()=>{s.page+=1,this.setState({filters:s},this.getFriwords)},type:"primary",icon:n.a.createElement(E.a,null),style:{display:"flex",width:"80%",margin:"0 auto",marginBottom:20,justifyContent:"center",alignItems:"center",height:40}},"Cargar m\xe1s")),n.a.createElement(Ee,{tab:n.a.createElement("span",null,n.a.createElement(b.a,null),"Recientes"),key:"1"},t&&t.map((e,t)=>n.a.createElement(ye,{loading:this.state.isLoading,friword:e,comments:e.comments,likes:e.likes_qty,dislikes:e.dislikes_qty,commentsQty:e.comments_qty,user:this.state.user,onLike:()=>{ee.likeById(e.id,t=>{setTimeout(()=>{this.getFriwordById(e.id)},500)})},onDislike:()=>{ee.dislikeById(e.id,t=>{setTimeout(()=>{this.getFriwordById(e.id)},500)})},onRequestComments:()=>{this.getFriwordById(e.id)}})),n.a.createElement(m.a,{onClick:()=>{s.page+=1,this.setState({filters:s},this.getFriwords)},type:"primary",icon:n.a.createElement(E.a,null),style:{display:"flex",width:"80%",margin:"0 auto",marginBottom:20,justifyContent:"center",alignItems:"center",height:40}},"Cargar m\xe1s")),n.a.createElement(Ee,{tab:n.a.createElement("span",null,n.a.createElement(b.a,null),"M\xedos"),key:"2"},t&&t.map((e,t)=>n.a.createElement(ye,{loading:this.state.isLoading,friword:e,comments:e.comments,likes:e.likes_qty,dislikes:e.dislikes_qty,commentsQty:e.comments_qty,user:this.state.user,onLike:()=>{ee.likeById(e.id,t=>{setTimeout(()=>{this.getFriwordById(e.id)},500)})},onDislike:()=>{ee.dislikeById(e.id,t=>{setTimeout(()=>{this.getFriwordById(e.id)},500)})},onRequestComments:()=>{this.getFriwordById(e.id)}})),n.a.createElement(m.a,{onClick:()=>{s.page+=1,this.setState({filters:s},this.getFriwords)},type:"primary",icon:n.a.createElement(E.a,null),style:{display:"flex",width:"80%",margin:"0 auto",marginBottom:20,justifyContent:"center",alignItems:"center",height:40}},"Cargar m\xe1s"))),this.state.isLoading&&n.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"}},n.a.createElement(d.a,{indicator:n.a.createElement(C.a,{style:{fontSize:24},spin:!0})}))))}}s(433);c.a.Option,l.a.Title;var Ce=()=>n.a.createElement(be,null);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(Ce,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})},70:function(e,t,s){}},[[211,1,2]]]);
//# sourceMappingURL=main.80d23e03.chunk.js.map